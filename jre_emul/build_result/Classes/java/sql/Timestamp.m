//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//
//  Created by Larry Tin <dev@goodow.com>
//

#include "IOSClass.h"
#include "java/lang/ClassCastException.h"
#include "java/lang/Deprecated.h"
#include "java/lang/Exception.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/lang/NumberFormatException.h"
#include "java/lang/StringBuilder.h"
#include "java/sql/Timestamp.h"
#include "java/text/ParsePosition.h"
#include "java/text/SimpleDateFormat.h"
#include "java/util/Date.h"
#include "java/util/Locale.h"
#include "java/util/regex/Pattern.h"

@implementation JavaSqlTimestamp

+ (NSArray *)memDebugStaticReferences {
  NSMutableArray *result = [NSMutableArray array];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:JavaSqlTimestamp_TIME_FORMAT_REGEX_ name:@"JavaSqlTimestamp_TIME_FORMAT_REGEX_"]];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:JavaSqlTimestamp_PADDING_ name:@"JavaSqlTimestamp_PADDING_"]];
  return result;
}

static NSString * JavaSqlTimestamp_TIME_FORMAT_REGEX_ = @"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}.*";
static NSString * JavaSqlTimestamp_PADDING_ = @"000000000";

+ (NSString *)TIME_FORMAT_REGEX {
  return JavaSqlTimestamp_TIME_FORMAT_REGEX_;
}

+ (NSString *)PADDING {
  return JavaSqlTimestamp_PADDING_;
}

- (id)initWithInt:(int)theYear
          withInt:(int)theMonth
          withInt:(int)theDate
          withInt:(int)theHour
          withInt:(int)theMinute
          withInt:(int)theSecond
          withInt:(int)theNano {
  if (self = [super initWithInt:theYear withInt:theMonth withInt:theDate withInt:theHour withInt:theMinute withInt:theSecond]) {
    if (theNano < 0 || theNano > 999999999) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:[NSString stringWithFormat:@"ns out of range: %d", theNano]] autorelease];
    }
    nanos_ = theNano;
    JreMemDebugAdd(self);
  }
  return self;
}

+ (IOSObjectArray *)__exceptions_JavaSqlTimestampWithInt_withInt_withInt_withInt_withInt_withInt_withInt_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [JavaLangIllegalArgumentException getClass] } count:1 type:[IOSClass getClass]];
}

- (id)initWithLong:(long long int)theTime {
  if (self = [super initWithLong:theTime]) {
    [self setTimeImplWithLong:theTime];
    JreMemDebugAdd(self);
  }
  return self;
}

- (BOOL)afterWithJavaSqlTimestamp:(JavaSqlTimestamp *)theTimestamp {
  long long int thisTime = [self getTime];
  long long int compareTime = [((JavaSqlTimestamp *) nil_chk(theTimestamp)) getTime];
  if (thisTime > compareTime) {
    return YES;
  }
  else if (thisTime < compareTime) {
    return NO;
  }
  else if ([self getNanos] > [theTimestamp getNanos]) {
    return YES;
  }
  else {
    return NO;
  }
}

- (BOOL)beforeWithJavaSqlTimestamp:(JavaSqlTimestamp *)theTimestamp {
  long long int thisTime = [self getTime];
  long long int compareTime = [((JavaSqlTimestamp *) nil_chk(theTimestamp)) getTime];
  if (thisTime < compareTime) {
    return YES;
  }
  else if (thisTime > compareTime) {
    return NO;
  }
  else if ([self getNanos] < [theTimestamp getNanos]) {
    return YES;
  }
  else {
    return NO;
  }
}

- (int)compareToWithId:(JavaUtilDate *)theObject {
  if (theObject != nil && ![theObject isKindOfClass:[JavaUtilDate class]]) {
    @throw [[[JavaLangClassCastException alloc] init] autorelease];
  }
  return [self compareToWithJavaSqlTimestamp:(JavaSqlTimestamp *) check_class_cast(theObject, [JavaSqlTimestamp class])];
}

+ (IOSObjectArray *)__exceptions_compareToWithJavaUtilDate_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [JavaLangClassCastException getClass] } count:1 type:[IOSClass getClass]];
}

- (int)compareToWithJavaSqlTimestamp:(JavaSqlTimestamp *)theTimestamp {
  int result = [super compareToWithId:theTimestamp];
  if (result == 0) {
    int thisNano = [self getNanos];
    int thatNano = [((JavaSqlTimestamp *) nil_chk(theTimestamp)) getNanos];
    if (thisNano > thatNano) {
      return 1;
    }
    else if (thisNano == thatNano) {
      return 0;
    }
    else {
      return -1;
    }
  }
  return result;
}

- (BOOL)isEqual:(id)theObject {
  if ([theObject isKindOfClass:[JavaSqlTimestamp class]]) {
    return [self equalsWithJavaSqlTimestamp:(JavaSqlTimestamp *) check_class_cast(theObject, [JavaSqlTimestamp class])];
  }
  return NO;
}

- (BOOL)equalsWithJavaSqlTimestamp:(JavaSqlTimestamp *)theTimestamp {
  if (theTimestamp == nil) {
    return NO;
  }
  return ([self getTime] == [((JavaSqlTimestamp *) nil_chk(theTimestamp)) getTime]) && ([self getNanos] == [theTimestamp getNanos]);
}

- (int)getNanos {
  return nanos_;
}

- (long long int)getTime {
  long long int theTime = [super getTime];
  theTime = theTime + (nanos_ / 1000000);
  return theTime;
}

- (void)setNanosWithInt:(int)n {
  if ((n < 0) || (n > 999999999)) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Value out of range"] autorelease];
  }
  nanos_ = n;
}

+ (IOSObjectArray *)__exceptions_setNanosWithInt_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [JavaLangIllegalArgumentException getClass] } count:1 type:[IOSClass getClass]];
}

- (void)setTimeWithLong:(long long int)theTime {
  [self setTimeImplWithLong:theTime];
}

- (void)setTimeImplWithLong:(long long int)theTime {
  int milliseconds = (int) (theTime % 1000);
  theTime = theTime - milliseconds;
  if (milliseconds < 0) {
    theTime = theTime - 1000;
    milliseconds = 1000 + milliseconds;
  }
  [super setTimeWithLong:theTime];
  [self setNanosWithInt:milliseconds * 1000000];
}

- (NSString *)description {
  JavaLangStringBuilder *sb = [[[JavaLangStringBuilder alloc] initWithInt:29] autorelease];
  [self formatWithInt:([self getYear] + 1900) withInt:4 withJavaLangStringBuilder:sb];
  [sb appendWithChar:'-'];
  [self formatWithInt:([self getMonth] + 1) withInt:2 withJavaLangStringBuilder:sb];
  [sb appendWithChar:'-'];
  [self formatWithInt:[self getDate] withInt:2 withJavaLangStringBuilder:sb];
  [sb appendWithChar:' '];
  [self formatWithInt:[self getHours] withInt:2 withJavaLangStringBuilder:sb];
  [sb appendWithChar:':'];
  [self formatWithInt:[self getMinutes] withInt:2 withJavaLangStringBuilder:sb];
  [sb appendWithChar:':'];
  [self formatWithInt:[self getSeconds] withInt:2 withJavaLangStringBuilder:sb];
  [sb appendWithChar:'.'];
  if (nanos_ == 0) {
    [sb appendWithChar:'0'];
  }
  else {
    [self formatWithInt:nanos_ withInt:9 withJavaLangStringBuilder:sb];
    while ([sb charAtWithInt:[sb sequenceLength] - 1] == '0') {
      [sb setLengthWithInt:[sb sequenceLength] - 1];
    }
  }
  return [sb description];
}

- (void)formatWithInt:(int)date
              withInt:(int)digits
withJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  NSString *str = [NSString valueOfInt:date];
  if (digits - [((NSString *) nil_chk(str)) length] > 0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:[((NSString *) nil_chk(JavaSqlTimestamp_PADDING_)) substring:0 endIndex:digits - [str length]]];
  }
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:str];
}

+ (JavaSqlTimestamp *)valueOfWithNSString:(NSString *)s {
  if (s == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Argument cannot be null"] autorelease];
  }
  s = [((NSString *) nil_chk(s)) trim];
  if (![JavaUtilRegexPattern matchesWithNSString:JavaSqlTimestamp_TIME_FORMAT_REGEX_ withJavaLangCharSequence:s]) {
    @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
  }
  JavaTextSimpleDateFormat *df = [[[JavaTextSimpleDateFormat alloc] initWithNSString:@"yyyy-MM-dd HH:mm:ss" withJavaUtilLocale:[JavaUtilLocale US]] autorelease];
  JavaTextParsePosition *pp = [[[JavaTextParsePosition alloc] initWithInt:0] autorelease];
  JavaUtilDate *theDate;
  @try {
    theDate = [df parseWithNSString:s withJavaTextParsePosition:pp];
  }
  @catch (JavaLangException *e) {
    @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
  }
  if (theDate == nil) {
    @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
  }
  int position = [pp getIndex];
  int remaining = [((NSString *) nil_chk(s)) length] - position;
  int theNanos;
  if (remaining == 0) {
    theNanos = 0;
  }
  else {
    if (([s length] - position) < [@".n" length]) {
      @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
    }
    if (([s length] - position) > [@".nnnnnnnnn" length]) {
      @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
    }
    if ([s charAtWithInt:position] != '.') {
      @throw [[[JavaLangNumberFormatException alloc] initWithNSString:[NSString stringWithFormat:@"Bad input string format: expected '.' not '%C' in \"%@\"", [s charAtWithInt:position], s]] autorelease];
    }
    int nanoLength = [s length] - position - 1;
    NSString *theNanoString = [s substring:position + 1 endIndex:position + 1 + nanoLength];
    theNanoString = [NSString stringWithFormat:@"%@000000000", theNanoString];
    theNanoString = [theNanoString substring:0 endIndex:9];
    @try {
      theNanos = [JavaLangInteger parseIntWithNSString:theNanoString];
    }
    @catch (JavaLangException *e) {
      @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
    }
  }
  if (theNanos < 0 || theNanos > 999999999) {
    @throw [JavaSqlTimestamp badTimestampStringWithNSString:s];
  }
  JavaSqlTimestamp *theTimestamp = [[[JavaSqlTimestamp alloc] initWithLong:[((JavaUtilDate *) nil_chk(theDate)) getTime]] autorelease];
  [theTimestamp setNanosWithInt:theNanos];
  return theTimestamp;
}

+ (IOSObjectArray *)__exceptions_valueOfWithNSString_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [JavaLangIllegalArgumentException getClass] } count:1 type:[IOSClass getClass]];
}

+ (JavaLangIllegalArgumentException *)badTimestampStringWithNSString:(NSString *)s {
  @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:[NSString stringWithFormat:@"%@%@'", @"Timestamp format must be yyyy-MM-dd HH:mm:ss.fffffffff; was '", s]] autorelease];
}

- (void)copyAllFieldsTo:(JavaSqlTimestamp *)other {
  [super copyAllFieldsTo:other];
  other->nanos_ = nanos_;
}

- (NSArray *)memDebugStrongReferences {
  NSMutableArray *result =
      [[[super memDebugStrongReferences] mutableCopy] autorelease];
  return result;
}

+ (IOSObjectArray *)__annotations_JavaSqlTimestampWithInt_withInt_withInt_withInt_withInt_withInt_withInt_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[[JavaLangDeprecatedImpl alloc] init] autorelease] } count:1 type:[IOSClass classWithProtocol:@protocol(JavaLangAnnotationAnnotation)]];
}

@end
