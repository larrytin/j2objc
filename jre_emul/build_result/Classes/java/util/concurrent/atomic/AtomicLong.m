//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: android/libcore/luni/src/main/java/java/util/concurrent/atomic/AtomicLong.java
//
//  Created by retechretech on 13-9-25.
//

#include "java/io/Serializable.h"
#include "java/lang/Long.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include <libkern/OSAtomic.h>

@implementation JavaUtilConcurrentAtomicAtomicLong

+ (NSArray *)memDebugStaticReferences {
  NSMutableArray *result = [NSMutableArray array];
  return result;
}

- (id)initWithLong:(long long int)initialValue {
  if (self = [super init]) {
    value_ = initialValue;
    JreMemDebugAdd(self);
  }
  return self;
}

- (id)init {
  return JreMemDebugAdd([super init]);
}

- (long long int)get {
  return value_;
}

- (void)setWithLong:(long long int)newValue {
  value_ = newValue;
}

- (void)lazySetWithLong:(long long int)newValue {
  value_ = newValue;
}

- (long long int)getAndSetWithLong:(long long int)newValue {
  while (YES) {
    long long int current = [self get];
    if ([self compareAndSetWithLong:current withLong:newValue]) return current;
  }
}

- (BOOL)compareAndSetWithLong:(long long int)expect
                     withLong:(long long int)update {
  return [self compareAndSwapValueWithLong:expect withLong:update];
}

- (BOOL)weakCompareAndSetWithLong:(long long int)expect
                         withLong:(long long int)update {
  return [self compareAndSwapValueWithLong:expect withLong:update];
}

- (long long int)getAndIncrement {
  while (YES) {
    long long int current = [self get];
    long long int next = current + 1;
    if ([self compareAndSetWithLong:current withLong:next]) return current;
  }
}

- (long long int)getAndDecrement {
  while (YES) {
    long long int current = [self get];
    long long int next = current - 1;
    if ([self compareAndSetWithLong:current withLong:next]) return current;
  }
}

- (long long int)getAndAddWithLong:(long long int)delta {
  while (YES) {
    long long int current = [self get];
    long long int next = current + delta;
    if ([self compareAndSetWithLong:current withLong:next]) return current;
  }
}

- (long long int)incrementAndGet {
  for (; ; ) {
    long long int current = [self get];
    long long int next = current + 1;
    if ([self compareAndSetWithLong:current withLong:next]) return next;
  }
}

- (long long int)decrementAndGet {
  for (; ; ) {
    long long int current = [self get];
    long long int next = current - 1;
    if ([self compareAndSetWithLong:current withLong:next]) return next;
  }
}

- (long long int)addAndGetWithLong:(long long int)delta {
  for (; ; ) {
    long long int current = [self get];
    long long int next = current + delta;
    if ([self compareAndSetWithLong:current withLong:next]) return next;
  }
}

- (NSString *)description {
  return [JavaLangLong toStringWithLong:[self get]];
}

- (int)intValue {
  return (int) [self get];
}

- (long long int)longLongValue {
  return [self get];
}

- (float)floatValue {
  return (float) [self get];
}

- (double)doubleValue {
  return (double) [self get];
}

+ (void)memoryBarrier {
  OSMemoryBarrier();
}

- (BOOL)compareAndSwapValueWithLong:(long long int)oldValue
                           withLong:(long long int)newValue {
  return OSAtomicCompareAndSwap64Barrier(oldValue, newValue, &value_);
}

- (void)copyAllFieldsTo:(JavaUtilConcurrentAtomicAtomicLong *)other {
  [super copyAllFieldsTo:other];
  other->value_ = value_;
}

- (NSArray *)memDebugStrongReferences {
  NSMutableArray *result =
      [[[super memDebugStrongReferences] mutableCopy] autorelease];
  return result;
}

@end
