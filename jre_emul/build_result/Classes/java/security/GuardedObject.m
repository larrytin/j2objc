//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: android/libcore/luni/src/main/java/java/security/GuardedObject.java
//
//  Created by retechretech on 13-9-25.
//

#include "IOSClass.h"
#include "java/lang/SecurityException.h"
#include "java/security/Guard.h"
#include "java/security/GuardedObject.h"

@implementation JavaSecurityGuardedObject

+ (NSArray *)memDebugStaticReferences {
  NSMutableArray *result = [NSMutableArray array];
  return result;
}

- (id)initWithId:(id)object
withJavaSecurityGuard:(id<JavaSecurityGuard>)guard {
  if (self = [super init]) {
    JavaSecurityGuardedObject_set_object_(self, object);
    JavaSecurityGuardedObject_set_guard_(self, guard);
    JreMemDebugAdd(self);
  }
  return self;
}

- (id)getObject {
  if (guard_ != nil) {
    [guard_ checkGuardWithId:object_];
  }
  return object_;
}

+ (IOSObjectArray *)__exceptions_getObject {
  return [IOSObjectArray arrayWithObjects:(id[]) { [JavaLangSecurityException getClass] } count:1 type:[IOSClass getClass]];
}

- (void)dealloc {
  JreMemDebugRemove(self);
  JavaSecurityGuardedObject_set_guard_(self, nil);
  JavaSecurityGuardedObject_set_object_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(JavaSecurityGuardedObject *)other {
  [super copyAllFieldsTo:other];
  JavaSecurityGuardedObject_set_guard_(other, guard_);
  JavaSecurityGuardedObject_set_object_(other, object_);
}

- (NSArray *)memDebugStrongReferences {
  NSMutableArray *result =
      [[[super memDebugStrongReferences] mutableCopy] autorelease];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:object_ name:@"object"]];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:guard_ name:@"guard"]];
  return result;
}

@end
