//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: android/libcore/luni/src/main/java/java/security/SecureClassLoader.java
//
//  Created by retechretech on 13-9-25.
//

#include "IOSByteArray.h"
#include "IOSClass.h"
#include "java/lang/ClassLoader.h"
#include "java/nio/ByteBuffer.h"
#include "java/security/CodeSource.h"
#include "java/security/PermissionCollection.h"
#include "java/security/Permissions.h"
#include "java/security/ProtectionDomain.h"
#include "java/security/SecureClassLoader.h"
#include "java/util/HashMap.h"

@implementation JavaSecuritySecureClassLoader

+ (NSArray *)memDebugStaticReferences {
  NSMutableArray *result = [NSMutableArray array];
  return result;
}

- (id)init {
  if (self = [super init]) {
    JavaSecuritySecureClassLoader_set_pds_(self, [[[JavaUtilHashMap alloc] init] autorelease]);
    JreMemDebugAdd(self);
  }
  return self;
}

- (id)initWithJavaLangClassLoader:(JavaLangClassLoader *)parent {
  if (self = [super initWithJavaLangClassLoader:parent]) {
    JavaSecuritySecureClassLoader_set_pds_(self, [[[JavaUtilHashMap alloc] init] autorelease]);
    JreMemDebugAdd(self);
  }
  return self;
}

- (JavaSecurityPermissionCollection *)getPermissionsWithJavaSecurityCodeSource:(JavaSecurityCodeSource *)codesource {
  return [[[JavaSecurityPermissions alloc] init] autorelease];
}

- (IOSClass *)defineClassWithNSString:(NSString *)name
                        withByteArray:(IOSByteArray *)b
                              withInt:(int)off
                              withInt:(int)len
           withJavaSecurityCodeSource:(JavaSecurityCodeSource *)cs {
  return nil;
}

- (IOSClass *)defineClassWithNSString:(NSString *)name
                withJavaNioByteBuffer:(JavaNioByteBuffer *)b
           withJavaSecurityCodeSource:(JavaSecurityCodeSource *)cs {
  return nil;
}

- (JavaSecurityProtectionDomain *)getPDWithJavaSecurityCodeSource:(JavaSecurityCodeSource *)cs {
  if (cs == nil) {
    return nil;
  }
  JavaSecurityProtectionDomain *pd;
  @synchronized (pds_) {
    if ((pd = [((JavaUtilHashMap *) nil_chk(pds_)) getWithId:cs]) != nil) {
      return pd;
    }
    JavaSecurityPermissionCollection *perms = [self getPermissionsWithJavaSecurityCodeSource:cs];
    pd = [[[JavaSecurityProtectionDomain alloc] initWithJavaSecurityCodeSource:cs withJavaSecurityPermissionCollection:perms withJavaLangClassLoader:self withJavaSecurityPrincipalArray:nil] autorelease];
    [pds_ putWithId:cs withId:pd];
  }
  return pd;
}

- (void)dealloc {
  JreMemDebugRemove(self);
  JavaSecuritySecureClassLoader_set_pds_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(JavaSecuritySecureClassLoader *)other {
  [super copyAllFieldsTo:other];
  JavaSecuritySecureClassLoader_set_pds_(other, pds_);
}

- (NSArray *)memDebugStrongReferences {
  NSMutableArray *result =
      [[[super memDebugStrongReferences] mutableCopy] autorelease];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:pds_ name:@"pds"]];
  return result;
}

@end
